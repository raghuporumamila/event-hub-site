<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="canonical"
	href="https://getbootstrap.com/docs/4.3/examples/jumbotron/">
<style>
.bd-placeholder-img {
	font-size: 1.125rem;
	text-anchor: middle;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

@media ( min-width : 768px) {
	.bd-placeholder-img-lg {
		font-size: 3.5rem;
	}
}
</style>
<!-- Custom styles for this template -->
<link href="/css/jumbotron.css" rel="stylesheet">
<th:block th:include="~{fragments/general :: headerfiles}">
</th:block>
</head>
<body>


	<th:block th:include="~{fragments/general :: siteNavBar}">
	</th:block>
	<main role="main">
	<div id="contentArea" class="container">
		<!-- Main jumbotron for a primary marketing message or call to action -->
		<div class="jumbotron">
			<div class="container">
				<h1 class="display-3">Event Hub</h1>
				<p>One stop place to aggregate organization business events</p>
				<p>
					<a class="btn btn-primary btn-lg" href="#" role="button">Learn
						more &raquo;</a>
				</p>
			</div>
		</div>

		<div class="container">
			<!-- Example row of columns -->
			<div class="row">
				<div class="col-md-4">
					<h2>How it works?</h2>
					<p>We provide plugins to integrate with your organization event
						sources with our hub.</p>
					<p>
						<a class="btn btn-secondary" href="#" role="button">View
							details &raquo;</a>
					</p>
				</div>
				<div class="col-md-4">
					<h2>Integration with messaging</h2>
					<p>Event Hub can integrate with any target messaging system of
						your choice (i.e., Kafka, Pubsub & RabbitMQ)</p>
					<p>
						<a class="btn btn-secondary" href="#" role="button">View
							details &raquo;</a>
					</p>
				</div>
				<div class="col-md-4">
					<h2>Integration with dataware house</h2>
					<p>Event Hub can integrate with any target data ware house of
						your choice in the cloud (i.e., BigQuery, Hive & Redshift)</p>
					<p>
						<a class="btn btn-secondary" href="#" role="button">View
							details &raquo;</a>
					</p>
				</div>
			</div>

			<hr>

		</div>
		<!-- /container -->
	</div>
		<button id="chat-toggler" style="position:fixed; bottom:20px; right:20px; padding:15px; border-radius:50%; background:#007bff; color:white; border:none; cursor:pointer; font-size:20px;">
			ðŸ’¬
		</button>

		<div id="chat-window" style="display:none; position:fixed; bottom:80px; right:20px; width:350px; height:450px; background:white; border:1px solid #ccc; border-radius:10px; flex-direction:column; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
			<div style="background:#007bff; color:white; padding:10px; border-radius:10px 10px 0 0;">AI Assistant</div>

			<div id="chat-messages" style="flex:1; padding:10px; overflow-y:auto; font-size:14px;">
			</div>

			<div style="padding:10px; border-top:1px solid #eee; display:flex;">
				<input type="text" id="user-input" placeholder="Ask me something..." style="flex:1; padding:8px; border:1px solid #ddd; border-radius:4px;">
				<button id="send-btn" style="margin-left:5px; padding:8px 15px; background:#007bff; color:white; border:none; border-radius:4px; cursor:pointer;">Send</button>
			</div>
		</div>
		<script language="JavaScript">
			document.getElementById('chat-toggler').onclick = () => {
				const win = document.getElementById('chat-window');
				win.style.display = win.style.display === 'none' ? 'flex' : 'none';
			};

			document.getElementById('send-btn').onclick = async () => {
				const input = document.getElementById('user-input');
				const msgContainer = document.getElementById('chat-messages');
				const text = input.value;
				if (!text) return;

				// 1. Add User Message to UI
				msgContainer.innerHTML += `<div style="text-align:right; margin-bottom:10px;"><span style="background:#e9ecef; padding:5px 10px; border-radius:10px;">${text}</span></div>`;
				input.value = '';

				// 2. Call Spring Boot Backend
				try {
					const response = await fetch('/genAIChat', {
						method: 'POST',
						headers: { 'Content-Type': 'application/json' },
						body: JSON.stringify({ message: text })
					});
					const aiText = await response.text();

					// 3. Add AI Response to UI
					msgContainer.innerHTML += `<div style="margin-bottom:10px;"><span style="background:#007bff; color:white; padding:5px 10px; border-radius:10px;">${aiText}</span></div>`;
					msgContainer.scrollTop = msgContainer.scrollHeight;
				} catch (err) {
					console.error("Failed to reach AI:", err);
				}
			};
		</script>
	</main>

	<div th:replace="fragments/general :: footer"></div>
	<script type="text/javascript">
		function showLogin() {
			$.get('/showLogin', function(data) {
				$("#contentArea").html(data)
			});
		}
	</script>
	<div th:replace="fragments/general :: jquery"></div>
	<div th:replace="fragments/general :: bootsrtapjs"></div>

</body>
</html>
